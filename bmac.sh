#!/usr/bin/env bash

# docker run --network=host --rm -it --volume=/data/mac_output:/output --volume=/data/ClickHouse/src:/build --volume=/data/mac_ccache:/ccache -e CC=clang-8 -e CXX=clang++-8 -e CCACHE_DIR=/ccache -e CCACHE_BASEDIR=/build -e CCACHE_NOHASHDIR=true -e CCACHE_COMPILERCHECK=content -e AUTHOR='amosbird' -e CMAKE_FLAGS="$CMAKE_FLAGS -DADD_GDB_INDEX_FOR_GOLD=1 -DENABLE_READLINE=1 -DHAVE_READLINE_HISTORY_EXITCODE=0 -DCMAKE_C_COMPILER=clang-8 -DCMAKE_CXX_COMPILER=clang++-8 -DCMAKE_AR:FILEPATH=/cctools/bin/x86_64-apple-darwin-ar -DCMAKE_RANLIB:FILEPATH=/cctools/bin/x86_64-apple-darwin-ranlib -DCMAKE_SYSTEM_NAME=Darwin -DSDK_PATH=/cctools/MacOSX10.14.sdk -DLINKER_NAME=/cctools/bin/x86_64-apple-darwin-ld" -v /home/amos/8.0.1:/readline -v /home/amos/2.0.8:/termcap -v /home/amos/6.1:/ncurses amosbird/clickhouse-binary-builder /build.sh

docker run --network=host --rm --volume=/data/mac_output:/output --volume=/data/ClickHouse/src:/build --volume=/data/mac_ccache:/ccache -e CC=clang-8 -e CXX=clang++-8 -e CCACHE_DIR=/ccache -e CCACHE_BASEDIR=/build -e CCACHE_NOHASHDIR=true -e CCACHE_COMPILERCHECK=content -e VERSION_STRING='19.19.1.1829' -e AUTHOR='clickhouse' -e CMAKE_FLAGS="$CMAKE_FLAGS -DADD_GDB_INDEX_FOR_GOLD=1 -DADD_GDB_INDEX_FOR_GOLD=1 -DENABLE_READLINE=1 -DHAVE_READLINE_HISTORY_EXITCODE=0 -DCMAKE_AR:FILEPATH=/cctools/bin/x86_64-apple-darwin-ar -DCMAKE_RANLIB:FILEPATH=/cctools/bin/x86_64-apple-darwin-ranlib -DLINKER_NAME=/cctools/bin/x86_64-apple-darwin-ld -DCMAKE_TOOLCHAIN_FILE=/build/cmake/darwin/toolchain-x86_64.cmake -DCMAKE_C_COMPILER=`which clang-8` -DCMAKE_CXX_COMPILER=`which clang++-8` -DYANDEX_OFFICIAL_BUILD=1"  amosbird/clickhouse-binary-builder
